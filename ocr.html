<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VisionOCR</title>

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/login-modal.css" />
  <link rel="stylesheet" href="css/contact-modal.css">
  <link rel="stylesheet" href="css/stickynotes-style.css">
  <link rel="stylesheet" href="css/visionocr.css">

  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

  <script> window.PB_URL = "https://pb.junxieliang.com" </script>

  <script type="module" src="java/contact-sumbit.js" defer></script>
  <script type="module" src="java/auth.js" defer></script>
  <script src="java/clarity.js" defer></script>
  <script src="java/script.js" defer></script>
  <script src="java/contact-modal.js" defer></script>

  <script src="https://unpkg.com/tesseract.js@5.0.3/dist/tesseract.min.js"></script>
  <script src="java/visionocr.js" defer></script>
</head>
<body>
  <header>
    <nav class="navbar">
      <h1 class="title"><a href="index.html">JUNXIELIANG</a></h1>
      <a href="#" class="toggle-button">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </a>
      <div class="navbar-content">
        <div class="navbar-links">
          <ul>
            <li><a href="ocr.html">VisionOCR</a></li>
            <li><a href="calendar.html">Calendar</a></li>
            <li><a href="store.html">Store</a></li>
            <li><a href="counter.html">Habit</a></li>
            <li><a id="Contact" href="#">Contact</a></li>
            <li><a id="loginBtn" class="account-btn" href="#" aria-label="Account">Login</a></li>
          </ul>

          <!-- Contact modal (unchanged) -->
          <div class="contact-modal-overlay">
            <div class="contact-modal-content">
              <button class="contact-modal-close">&times;</button>
              <h2>Leave a Message</h2>
              <form class="contact-form" id="contact-form">
                <div class="form-group">
                  <label for="fullName">Name</label>
                  <input type="text" id="fullName" placeholder="name" required>
                </div>
                <div class="form-group">
                  <label for="email">E-mail</label>
                  <input type="email" id="email" placeholder="you@example.com" required>
                </div>
                <div class="form-group">
                  <label for="message">Message</label>
                  <textarea id="message" rows="4" placeholder="message" required></textarea>
                </div>
                <button type="submit" class="contact-submit-btn">Send</button>
                <div id="contactStatus" role="status" aria-live="polite"></div>
              </form>
              <p class="location-info">
                Junxieliang@gmail.com<br>
                Based in San Francisco, California
              </p>
              <div class="social-links">
                <a href="https://www.linkedin.com/in/junxieliang/" target="_blank" class="linkedin-icon" aria-label="LinkedIn Profile">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                       xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" fill="currentColor"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </nav>
  </header>

  <main class="ocr-main">
    <section class="ocr-hero">
      <h2>VisionOCR</h2>
      <p>Use camera or upload to extract text locally in your browser.</p>
    </section>


    <section class="camera-section">
      <div class="camera-card">
        <button class="ocr-toggle" id="cameraToggle">
          <span class="ocr-toggle-label">Live camera</span>
            <svg class="ocr-toggle-chevron" width="18" height="18" viewBox="0 0 24 24">
              <path d="M6 9l6 6 6-6" stroke="#111827" stroke-width="2" fill="none"
                stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>


        <div id="cameraPanel" class="ocr-panel">
          <div class="camera-header">
            <div class="camera-header-left">
              <p id="cameraStatus" class="camera-status">Camera is off.</p>
            </div>
          </div>

          <div class="camera-preview-wrapper">
            <video id="cameraPreview" autoplay playsinline></video>
            <div class="camera-overlay"></div>
          </div>

          <div class="camera-controls">
            <button id="startCamera" class="camera-btn primary">Start camera</button>
            <button id="stopCamera" class="camera-btn" disabled>Stop</button>
            <button id="captureFrame" class="camera-btn" disabled>Capture + OCR</button>
          </div>
          <p class="ocr-permission-hint">
            If nothing happens, please check your browser's camera permission settings. No personal data is collected or stored.
          </p>
        </div>
      </div>
    </section>

    <section class="camera-section">
      <div class="camera-card">
        <button class="ocr-toggle" id="uploadToggle">
          <span class="ocr-toggle-label">Upload file</span>
          <svg class="ocr-toggle-chevron" width="18" height="18" viewBox="0 0 24 24">
            <path d="M6 9l6 6 6-6" stroke="#111827" stroke-width="2" fill="none"
                  stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <div id="uploadPanel" class="ocr-panel">
          <p id="fileNameDisplay" class="camera-file-name" style="display:none;"></p>
          <div class="camera-controls">
            <input id="fileInput" type="file" accept="image/*" style="display:none;" />
            <button id="fileInputBtn" class="camera-btn">Choose file</button>
            <button id="runFileOcrBtn" class="camera-btn primary">Run OCR</button>
          </div>
          <p class="ocr-permission-hint">
            Please upload jpg, png or pdf. No personal data is collected or stored.
          </p>

          <canvas id="captureCanvas" style="display:none;"></canvas>
        </div>
      </div>
    </section>

    <section class="camera-section">
      <div class="camera-card">
        <h3 class="camera-title">OCR Result</h3>

        <img
          id="capturedImage"
          alt="Captured or uploaded preview"
          style="max-width:100%; border-radius:8px; display:none; margin-bottom:0.75rem;"
        />

        <p id="ocrStatus" class="ocr-permission-hint">
          Please use either the camera or upload function to run OCR. Results will appear below.
        </p>

        <textarea
          id="ocrOutput"
          rows="8"
          style="width:100%; box-sizing:border-box; margin-top:0.25rem;"
          placeholder="OCR text will appear here. You can edit it manually."
        ></textarea>
      </div>
    </section>
  </main>

  <footer>
    <h6>Â© 2025 Jun Xie Liang. All Rights Reserved.</h6>
  </footer>
</body>
</html>
